{% extends 'learning_logs/base.html' %}
{% load staticfiles %}

{% block title %}{{ entry }}{% endblock %}

{% block header %}
  <h1>Entry: {{ entry|title }}</h1>
{% endblock %}

{% block content %}
  <a href="{% url 'learning_logs:topic' entry.topic.slug %}" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-hand-left"></span> Back</a>

  <br><br>
  <div class="lead"><span class="glyphicon glyphicon-user"></span> {{ entry.owner|title }} - Pablished on {{ entry.date_added|date:'M d, Y' }}</div>
  <p class="text-justify">{{ entry.text|linebreaksbr }}</p>

  <div>
    <span class="lead">{{ entry.views }} views </span>
    {% if user == entry.owner %}
      <a href="{% url 'learning_logs:entry_update' entry.slug %}" class="btn btn-warning"><span class="glyphicon glyphicon-edit"></span></a>
      <a href="{% url 'learning_logs:entry_delete' entry.slug %}" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span></a>
    {% endif %}
  </div>

  <br>

  {% if user.is_authenticated %}
    <div>
      <a href="{% url 'learning_logs:comment_create' entry.slug %}" class="btn btn-success">Add new comment</a>
    </div>
  {% endif %}

  <br>

  {% for comment in entry.comment_set.all %}
    <div class="media">
      <div class="media-left">
        <img src="{% static 'users/img/avatar-tiny.jpg' %}" alt="{{ comment.owner|title }}" class="media-object img-circle">
      </div>
      <div class="media-body">
        <h4 class="media-heding">{{ comment.owner|title }} <small><i>Pablished on {{ comment.date_added|date:'M d, Y' }}</i></small></h4>
        <p>{{ comment.text|linebreaks }}</p>
      </div>
    </div>
  {% empty %}
    <div class="panel panel-danger">
      <div class="panel-heading">No comments this entry yet.</div>
    </div>
  {% endfor %}

{% endblock %}
