{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}{{ topic }}{% endblock %}

{% block content %}

  <div class="row">
    {% for entry in topic.entry_set.all %}
      <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
        <div class="thumbnail">
          <a href="{% url 'learning_logs:entry' entry.slug %}">
            {% if entry.image %}
              <img src="{{ entry.image.url }}" alt="{{ entry.title }}" class="media-object img-rounded" heigth="80">
            {% else %}
              <img src="{% static 'img/photo_not_found.jpg' %}" alt="photo_not_found" class="media-object img-rounded" heigth="80">
            {% endif %}
            <div class="caption">
              <h3>
                <div><small><i>{{ entry.owner|title }} - {{ entry.date_added|date:'M d, Y H:i' }}</i></small></div>
                <b>{{ entry.title }}</b>
                <div>
                  <small>
                    <span class="glyphicon glyphicon-eye-open"></span> {{ entry.views }}
                    <span class="glyphicon glyphicon-pencil"></span> {{ entry.comment_set.all.count }}
                    {% if user == entry.owner %}
                      <a href="{% url 'learning_logs:entry_update' entry.slug %}"><span class="glyphicon glyphicon-edit"></span></a>
                      <a href="{% url 'learning_logs:entry_delete' entry.slug %}"><span class="glyphicon glyphicon-trash"></span></a>
                    {% endif %}
                  </small>
                </div>
              </h3>
              <p>{{ entry.text|linebreaks|truncatewords:15 }}</p>
            </div>
          </a>
        </div>
      </div>
    {% empty %}
      <div class="panel panel-default">
        <div class="panel-heading">There are no entries for this toliic yet.</div>
      </div>
    {% endfor %}
  </div>

  {% if user.is_authenticated %}
    <a href="{% url 'learning_logs:entry_create' topic.slug %}" class="btn btn-success">Add new entry</a>
  {% endif %}

{% endblock %}
